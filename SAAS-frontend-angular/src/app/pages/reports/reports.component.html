<section class="reports-page">
  <header class="reports-header">
    <div>
      <h1>Habit Intelligence Reports</h1>
      <p>
        Understand patterns, energy windows, and streak health at a glance so you can coach
        your future self with intention.
      </p>
    </div>
    <button 
      *ngIf="!loading" 
      (click)="refresh()" 
      class="btn btn-outline"
      style="margin-left: auto;"
    >
      ðŸ”„ Refresh
    </button>
  </header>

  <div *ngIf="loading" class="loading-state">
    <p>Loading your reports...</p>
  </div>

  <div *ngIf="error && !loading" class="error-state">
    <p>{{ error }}</p>
    <button (click)="loadReports()" class="retry-btn">Try Again</button>
  </div>

  <div *ngIf="!loading && stats">
    <div class="summary-grid">
      <article class="summary-tile" *ngFor="let tile of summaryTiles; trackBy: trackByTile">
        <span class="tile-label">{{ tile.label }}</span>
        <strong class="tile-value">{{ tile.value }}</strong>
        <span class="tile-trend">{{ tile.trend }}</span>
      </article>
    </div>

    <section class="visual-grid">
      <article class="visual-card">
        <h2>Momentum this week</h2>
        <div class="line-chart" *ngIf="momentumTimeline.length > 0">
          <div class="chart-column" *ngFor="let point of momentumTimeline">
            <div class="chart-bar" [style.height.%]="point.value"></div>
            <span class="chart-label">{{ point.day }}</span>
          </div>
        </div>
        <p class="chart-hint" *ngIf="stats.totalHabits > 0">
          Track your daily completion rate. Aim for consistency!
        </p>
        <p class="chart-hint" *ngIf="stats.totalHabits === 0">
          Start creating habits to see your momentum chart.
        </p>
      </article>

      <article class="visual-card">
        <h2>Habit cadence mix</h2>
        <ul class="breakdown-list" *ngIf="cadenceBreakdown.length > 0">
          <li *ngFor="let cadence of cadenceBreakdown">
            <span>{{ cadence.label }}</span>
            <div class="bar">
              <div class="bar-fill" [style.width.%]="cadence.value"></div>
            </div>
            <span class="value">{{ cadence.value }}%</span>
          </li>
        </ul>
        <p *ngIf="cadenceBreakdown.length === 0" class="empty-state">
          No habits yet. Create some habits to see the breakdown.
        </p>
      </article>
    </section>
  </div>
</section>
